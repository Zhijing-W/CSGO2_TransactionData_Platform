{% extends "base.html" %}

{% block title %}Dashboard - {{ current_user.display_name }}{% endblock %}

{% block content %}
    <h1>Portfolio Dashboard for {{ current_user.display_name }}</h1>
    
    <table>
        <thead>
            <tr>
                <th>Total Investment</th>
                <th>Current Market Value</th>
                <th>Realized PnL</th>
                <th>Unrealized PnL</th>
                <th>Total PnL</th>
                <th>ROI</th>
            </tr>
        </thead>
        <tbody>
            {% for row in portfolios %}
            <tr>
                <td>{{ "%.2f"|format(row.total_investment) }}</td>
                <td>{{ "%.2f"|format(row.total_market_value) }}</td>
                
                {% if row.total_realized_pnl > 0 %}
                    <td style="color: green;">+{{ "%.2f"|format(row.total_realized_pnl) }}</td>
                {% else %}
                    <td style="color: red;">{{ "%.2f"|format(row.total_realized_pnl) }}</td>
                {% endif %}

                {% if row.total_unrealized_pnl > 0 %}
                    <td style="color: green;">+{{ "%.2f"|format(row.total_unrealized_pnl) }}</td>
                {% else %}
                    <td style="color: red;">{{ "%.2f"|format(row.total_unrealized_pnl) }}</td>
                {% endif %}

                {% if row.total_pnl > 0 %}
                    <td style="color: green; font-weight: bold;">+{{ "%.2f"|format(row.total_pnl) }}</td>
                {% else %}
                    <td style="color: red; font-weight: bold;">{{ "%.2f"|format(row.total_pnl) }}</td>
                {% endif %}
                
                {% if row.roi_percent > 0 %}
                    <td style="color: green; font-weight: bold;">{{ "%.2f"|format(row.roi_percent) }}%</td>
                {% else %}
                    <td style="color: red; font-weight: bold;">{{ "%.2f"|format(row.roi_percent) }}%</td>
                {% endif %}
            </tr>
            {% else %}
            <tr><td colspan="6">You have no portfolio data yet. Add a purchase to get started.</td></tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
